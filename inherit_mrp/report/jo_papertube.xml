<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <data>

        <record id="paperformat_jo_papertube" model="report.paperformat">
            <field name="name">JO Papertube</field>
            <field name="default" eval="True" />
            <field name="format">A5</field>
            <field name="page_height">0</field>
            <field name="page_width">0</field>
            <field name="orientation">Landscape</field>
            <field name="margin_top">5</field>
            <field name="margin_bottom">35</field>
            <field name="margin_left">3</field>
            <field name="margin_right">3</field>
            <field name="header_line" eval="False" />
            <field name="header_spacing">35</field>
            <field name="dpi">90</field>
        </record>

        <report
            id="action_report_papertube"
            model="mrp.production"
            string="Print MO Papertube"
            report_type="qweb-pdf"
            name="inherit_mrp.report_papertuber"
            file="inherit_mrp.report_papertuber"
        />


        <record id="action_report_papertube" model="ir.actions.report">
            <field name="paperformat_id" eval="paperformat_jo_papertube"/>
        </record>


        <template id="report_papertuber">
            <t t-call="web.basic_layout">
                <style>
                    @font-face {
                    font-family: 'Courier Prime', monospace;
                    src: url('https://fonts.googleapis.com/css2?family=Courier+Prime&amp;display=swap');
                    }
                    .page {
                        font-family: 'Courier Prime', monospace;
                    }
                    .ttd {
                        margin-top: 2rem;
                    }
                </style>
                <t t-foreach="docs" t-as="o">
                    <div class="page">
                        <div class="row mb-16">
                            <div class="col-7">
                                <h5><span t-field="o.name"/></h5>
                            </div>
                            <div class="col-5">
                                <span class="float-right">
                                    <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 600, 100)" style="width:250px;height:40px"/>
                                </span>
                            </div>
                        </div>
                        <div class="oe_structure"/>
                            <div class="row" style="margin-top: 1rem;">
                                <div class="col-2">
                                    <div>
                                        Product
                                    </div>
                                    <div>
                                        Quantity
                                    </div>
                                    <div>
                                        Bill of Material
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div>
                                        : <span t-field="o.product_id.name"/>
                                    </div>
                                    <div>
                                        : <span t-field="o.product_qty"/>
                                    </div>
                                    <div>
                                        : <span t-field="o.bom_id.name"/>
                                    </div>
                                </div>
                                <div class="col-2">
                                    <div>
                                        Scheduled Date
                                    </div>
                                    <div>
                                        Responsible
                                    </div>
                                    <div>
                                        Ref
                                    </div>
                                </div>
                
                                <div class="col-4">
                                    <div>
                                        : <span t-field="o.date_planned_start"/>
                                    </div>
                                    <div>
                                        : <span t-field="o.user_id"/>
                                    </div>
                                    <div>
                                        : <span t-field="o.origin"/>
                                    </div>
                                </div>

                            </div>
                                <table class="table table-condensed" style="margin-top: 1rem;">
                                    <thead>
                                        <tr>
                                            <th class="text-right pt-0 pb-0 border-top-0 border-bottom-1">Product  to Consume</th>
                                            <th class="text-right pt-0 pb-0 border-top-0 border-bottom-1">Quantity</th>
                                            <th class="text-right pt-0 pb-0 border-top-0 border-bottom-1">Source Location</th>
                                            <th class="text-center pt-0 pb-0 border-top-0 border-bottom-1">Destination Location</th>
                                            <th class="text-center pt-0 pb-0 border-top-0 border-bottom-1">Barcode</th>
                                        </tr>
                                    </thead>
                                    <tbody class="sale_tbody">
                                        <t t-foreach="o.move_raw_ids" t-as="l">
                                            <tr>
                                                <td class="text-left pt-1 pb-1"><span t-field="l.product_id.name"/></td>
                                                <td class="text-right pt-1 pb-1">
                                                    <span t-field="l.product_uom_qty"/>
                                                </td>
                                                <td class="text-center pt-1 pb-1">
                                                    <span t-field="l.location_id"/>
                                                </td>
                                                <td class="text-center pt-1 pb-1">
                                                    <span t-field="l.location_dest_id"/>
                                                </td>
                                                <td class="text-center pt-1 pb-1">
                                                    <span t-if="l.product_id.barcode">
                                                        <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', l.product_id.barcode, 600, 100)" style="width:150x;height:40px"/>
                                                    </span>
                                                </td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>

                                <t t-if="page_index &lt; page_size - 1" groups="sale.group_sale_layout">
                                    <p style="page-break-before:always;"> </p>
                                </t>

                            <div class="footer">
                                <div class="ttd">
                                    <div class="row text-center">
                                        <div class="col-4">
                                            <span>Dibuat Oleh</span><br/><br/><br/>
                                            <span>_____________</span><br/>
                                            <span t-field="o.user_id.name"/><br/>
                                        </div>
                                        <div class="col-4">
                                            <span>Mengetahui</span><br/><br/><br/>
                                            <span>_____________</span>
                                            <span></span><br/>
                                        </div>
                                        <div class="col-4">
                                            <span>Menyetujui</span><br/><br/><br/>
                                            <span>_____________</span>
                                            <span></span><br/>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        <!-- <div class="oe_structure"/>
                            <td>Note : </td>
                            <div class="row">
                            <td class="text-right">
                                <span t-field="doc.note"/>
                            </td>
                        </div> -->
                    </div>
                </t>
            </t>
        </template>
    
    </data>
    

</odoo>

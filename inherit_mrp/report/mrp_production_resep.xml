<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record model="report.paperformat" id="paperformat_mrp_production_resep">
            <field name="name">Print Resep</field>
            <field name="default" eval="True" />
            <field name="format">custom</field>
            <field name="page_width">210</field>
            <field name="page_height">297</field>
            <field name="orientation">Portrait</field>
            <field name="margin_top">2</field>
            <field name="margin_bottom">2</field>
            <field name="margin_right">2</field>
            <field name="margin_left">2</field>
            <field name="header_line" eval="False" />
            <field name="header_spacing">35</field>
            <field name="dpi">90</field>
        </record>

        <report id="action_mrp_production_resep" model="mrp.production" string="Print Resep" report_type="qweb-pdf" name="inherit_mrp.mrp_production_resep" file="inherit_mrp.mrp_production_resep" />

        <record id="action_mrp_production_resep" model="ir.actions.report">
            <field name="paperformat_id" eval="paperformat_mrp_production_resep" />
        </record>

        <template id="mrp_production_resep">
            <t t-foreach="docs" t-as="o">
                <t t-call="inherit_mrp.mrp_production_resep_template"/>
            </t>
        </template>

        <template id="mrp_production_resep_template">
            <t t-call="web.basic_layout">
                <style>
                    @font-face {
                        font-family: 'Courier New';
                        font-style: normal;
                        font-weight: 400;
                        src: local('Courier New'), local('CourierNewPSMT'), url(http://themes.googleusercontent.com/licensed/font?kit=p0pJArTTK5Heq6xbYtNwnp0EAVxt0G0biEntp43Qt6E) format('truetype');
                    }

                    .Courier {
                        font-family: Courier New;
                    }

                    .table-data th,
                    .table-data td {
                        border: 1px solid black;
                        font-family: Courier New;
                    }
                </style>
                <div class="page">
                    <div class="text-right">DF-06.1 REV-02</div>
                    <div class="text-center" style="margin-top : -20px">
                        <b>BON PERMINTAAN OBAT</b>
                        <br/>
                        <b>DYEING FINISHING</b>
                    </div>
                    <br/>
                    <table class="table-condensed Courier" width="1000px">
                        <tr>
                            <td width="35%">
                                <table class="table-condensed Courier" width="100%">
                                    <tr>
                                        <td width="40%">
                                            <span>ID Partai</span>
                                        </td>
                                        <td width="60%">
                                            <span>:</span>
                                            <span t-field="o.name"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="40%">
                                            <span>No OM</span>
                                        </td>
                                        <td width="60%">
                                            <span>:</span>
                                            <span t-field="o.sale_id.name"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="40%">
                                            <span>Warna</span>
                                        </td>
                                        <td width="60%">
                                            <span>:</span>
                                            <span t-field="o.product_id.color_id.name"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="40%">
                                            <span>Mesin</span>
                                        </td>
                                        <td width="60%">
                                            <span>:</span>
                                            <span t-field="o.mesin_id.name"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="40%">
                                            <span>Gramasi</span>
                                        </td>
                                        <td width="60%">
                                            <span>:</span>
                                            <span t-field="o.gramasi_kain_finish"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="40%">
                                            <span>Berat Order</span>
                                        </td>
                                        <td width="60%">
                                            <span>:</span>
                                            <span t-field="o.qty_kg_kp"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="40%">
                                            <span>Kain</span>
                                        </td>
                                        <td width="60%">
                                            <span>:</span>
                                            <span t-field="o.greige_id.name"/>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td width="30%">
                                <table class="table-condensed Courier" width="100%">
                                    <tr>
                                        <td width="50%">
                                            <span>Tanggal</span>
                                        </td>
                                        <td width="50%">
                                            <span>:</span>
                                            <span t-field="o.date_planned_start" t-options="{&quot;format&quot;: &quot;dd/MM/yyyy&quot;}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="50%">
                                            <span>Kd Design</span>
                                        </td>
                                        <td width="50%">
                                            <span>:</span>
                                            <span t-field="o.greige_id.default_code"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="50%">
                                            <span>Air Celupan</span>
                                        </td>
                                        <td width="50%">
                                            <span>:</span>
                                            <span t-field="o.volume_air"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="50%">
                                            <span>Panjang Actual</span>
                                        </td>
                                        <td width="50%">
                                            <span>:</span>
                                            <span t-field="o.qty_yard_kp"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="50%">
                                            <span>Pick Grey</span>
                                        </td>
                                        <td width="50%">
                                            <span>:</span>
                                            <span t-field="o.greige_id.pic"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="50%">
                                            <span>Pick Finish</span>
                                        </td>
                                        <td width="50%">
                                            <span>:</span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td width="35%">
                                <table class="table-condensed Courier" width="100%">
                                    <tr>
                                        <td width="50%">
                                            <span>No Oplab</span>
                                            <span t-field="o.product_id.design_id"/>
                                        </td>
                                        <td width="50%">
                                            <span>:</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="50%">
                                            <span>Proses</span>
                                        </td>
                                        <td width="50%">
                                            <span>:</span>
                                            <span t-field="o.process_type"/>
                                            <span t-field="o.chemical_process_type_id"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="50%">
                                            <span>Susut Finish</span>
                                        </td>
                                        <td width="50%">
                                            <span>:</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="50%">
                                            <span>Lebar Greige</span>
                                        </td>
                                        <td width="50%">
                                            <span>:</span>
                                            <span t-field="o.greige_id.lebar"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="50%">
                                            <span>Lebar Finish</span>
                                        </td>
                                        <td width="50%">
                                            <span>:</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="50%">
                                            <span>Susut Berat / WR</span>
                                        </td>
                                        <td width="50%">
                                            <span>:</span>
                                            <span t-field="o.mrp_request_id.shrinkage_id"/>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>

                    <table style="margin-top : 20px" class="table-condensed Courier table-data" width="100%">
                        <t t-set="move" t-value="o.group_by_resep()" />
                        <t t-foreach="move" t-as="m">
                            <thead>
                                <tr>
                                    <th colspan="6">
                                        <span>Kategori Resep :</span>
                                        <span t-esc="m['type']"/>
                                    </th>
                                </tr>
                                <tr class="text-center">
                                    <th>Kategori</th>
                                    <th>Kd Obat</th>
                                    <th>Nama Obat</th>
                                    <th>
                                        <span>Resep</span>
                                        <br/>
                                        <span>(gr/ltr)</span>
                                    </th>
                                    <th>
                                        <span>Kebutuhan</span>
                                        <br/>
                                        <span>(kg)</span>
                                    </th>
                                    <th>No Urutan Masuk Obat Ke MC</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="o.move_raw_ids" t-as="move">
                                    <t t-if="m['type'] == move.type">
                                        <tr>
                                            <td></td>
                                            <td><span t-field="move.product_id.default_code"/></td>
                                            <td><span t-field="move.product_id.name"/></td>
                                            <td><span t-field="move.product_uom_qty"/></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </t>
                                </t>
                            </tbody>
                        </t>
                    </table>


                    <table style="margin-top : 20px" class="table-condensed Courier" width="100%">
                        <tr class="text-center">
                            <td>
                                <span>Pembuat</span>
                                <br/>
                                <br/>
                                <br/>
                                <span>__________________</span>
                            </td>
                            <td>
                                <span>Pemeriksa</span>
                                <br/>
                                <br/>
                                <br/>
                                <span>__________________</span>
                            </td>
                            <td>
                                <span>Pelaksana</span>
                                <br/>
                                <br/>
                                <br/>
                                <span>__________________</span>
                            </td>
                        </tr>
                    </table>
                </div>
            </t>
        </template>


    </data>
</odoo>

<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="qrscanner_template">
        <div style="width:100%">
            <style>
                .qr-container {
                    width: 500px;
                    height: 500px;
                    position: relative;
                }
                .qr-scanner-border {
                    width: 100%;
                    height: 100%;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    position: absolute;
                }

                /* barcode container */
                .anim-box {
                    position: relative;
                    width: 100%;
                    height: 100%;
                    padding: 25px 30px;
                    transition: transform .6s ease-out;
                }

                /* animated laser beam */
                .scanner {
                    width: 100%;
                    height: 3px;
                    background-color: #11ed09;
                    opacity: 0.7;
                    position:relative;
                    box-shadow: 0px 0px 8px 10px rgba(17, 237, 9, 0.49);
                    top:50%;
                    animation-name: scan;
                    animation-duration: 4s;
                    animation-timing-function: linear;
                    animation-iteration-count: infinite;
                    animation-play-state: running;
                }

                @keyframes scan {
                    0% {
                        box-shadow: 0px 0px 8px 10px rgba(17, 237, 9, 0.49);
                        top: 50%;
                    }  
                    25% {
                        box-shadow: 0px 6px 8px 10px rgba(17, 237, 9, 0.49);
                        top: 5px;
                    }
                    75% {
                        box-shadow: 0px -6px 8px 10px rgba(17, 237, 9, 0.49);
                        top: 98%;
                    }
                }
            </style>
            <t t-if="widget.mode === 'edit'">
                <div class="d-flex justify-content-center">
                    <div class="qr-container">
                        <video id="qr_scanner" width="100%" height="100%" style="object-fit: cover;"></video>
                        <div class="qr-scanner-border">
                            <div class='anim-box'>
                                <div class='scanner'></div>                      
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-center mt-3">
                    <p id="result"></p>
                </div>
                <div class="d-flex justify-content-center">
                    <div id="sourceSelectPanel" style="display:none">
                        <select id="sourceSelect" style="max-width:400px">
                        </select>
                    </div>
                </div>
                <div class="d-flex justify-content-center mt-3">
                    <button type="button" class="btn btn-primary" id="reloadButton">Reload</button>
                </div>
            </t>
        </div>
    </t>
</templates>
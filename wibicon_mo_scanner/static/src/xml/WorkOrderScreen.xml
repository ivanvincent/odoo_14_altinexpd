<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="WorkOrderScreen" owl="1">
        <main class="bg-gray-100 dark:bg-gray-800 h-screen overflow-auto relative">
            <div class="flex w-full">
                <div class="flex flex-col w-full overflow-auto pb-2 px-4 md:px-6" t-if="!props.state.isFinished">
                    <div class="w-full flex flex-col my-4  o_form_sheet overflow-auto">
                        <ul class="stepper horizontal">
                            <t t-foreach="props.state.mrp.workorder_ids" t-as="line" t-key="line.id">
                                <li class="step">
                                    <div class="step-title waves-effect waves-dark">
                                        <span t-esc="line.workcenter_id.name"/>
                                    </div>
                                    <div class="overflow-hidden step-content">
                                        <div class="row">
                                            <div class="d-grid gap-3 col-md-6 ">
                                                <div class="stats stats-vertical shadow">
                                                    <div class="stat">
                                                        <div class="stat-title">product</div>
                                                        <div class="stat-value" t-esc="props.state.mrp.product_id.name"></div>
                                                        <div class="stat-desc text-black">
                                                            <h4 t-esc="props.state.mrp.handling_id.name + ' | ' + props.state.mrp.process_type.name + ' | ' + props.state.mrp.design_id.name +'         |     Note :'+ props.state.mrp.note"></h4>
                                                        </div>
                                                    </div>

                                                    <div class="flex">
                                                        <div class="stat">
                                                            <div class="stat-title">Order</div>
                                                            <div class="stat-value" t-esc="props.state.mrp.sale_id.name"></div>
                                                            <div class="stat-desc" t-esc="props.state.mrp.partner_id.name"></div>
                                                        </div>
                                                    </div>

                                                    <div class="flex">
                                                        <div class="stat">
                                                            <div class="stat-title">Quantity</div>
                                                            <div class="stat-value" t-esc="props.state.mrp.product_qty"></div>
                                                            <div class="stat-desc">Yards</div>
                                                        </div>
                                                        <div class="stat" t-if="props.state.mrp.std_potong &gt; 0">
                                                            <div class="stat-title">Std Potong</div>
                                                            <div class="stat-value" t-esc="props.state.mrp.std_potong"></div>
                                                        </div>
                                                        <div class="stat">
                                                            <div t-att-class="('flex justify-center content-center text-center items-center bg-[' + props.state.mrp.html_color + ']')">
                                                                <div class="tes">
                                                                    <span class="text-white" t-esc="props.state.mrp.product_id.color"/>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>


                                                </div>
                                            </div>
                                            <div class="flex col-md-6">
                                                <form>
                                                    <div class="flex flex-col form-row">
                                                        <div class="form-row">
                                                            <div class="flex flex-row">
                                                                <button class="btn-back flex block btn btn-outline btn-accent hover:text-white" t-on-click="_btnBack">
                                                                    <span>Back</span>
                                                                </button>
                                                            </div>
                                                        </div>
                                                        <div class="w-full gap-3 flex flex-row">
                                                            <div class="gap-3 flex flex-auto flex-col">
                                                                <div class="form-row pt-3" t-if="!props.state.isFinished">
                                                                    <div class="w-full">
                                                                        <div class="flex flex-col w-full items-center relative">
                                                                            <Autocomplete id="line.workcenter_id.id" placeHolder="'Choose Workcenter'" value="props.state.prepareVals.workcenter_id.name" data="props.state.workcenter_ids ? props.state.workcenter_ids : []" t-on-chosen="onOptionChosenWorkCenter" model="'mrp.workcenter'" field="'workcenter_id'"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-row" t-if="!props.state.isFinished and line.workcenter_id.id == 15">
                                                                    <div class="w-full">
                                                                        <div class="flex flex-col items-center relative">
                                                                            <Autocomplete id="line.workcenter_id.id" placeHolder="'Choose Final Set'" value="props.state.prepareVals.finalset.name" data="props.state.mrp.finalset_ids ? props.state.finalset_ids : []" t-on-chosen="onOptionChosenFinalSet" model="'mrp.production.final.set'" field="'finalset_id'"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-row" t-if="!props.state.isFinished">
                                                                    <div class="w-full">
                                                                        <div class="flex flex-col items-center relative">
                                                                            <Autocomplete id="line.workcenter_id.id" placeHolder="'Choose Machine'" value="props.state.prepareVals.machine_id.name" data="props.state.machine_ids ? props.state.machine_ids : []" t-on-chosen="onOptionChosenMachine" model="'mrp.workcenter'" field="'machine_id'"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-row" t-if="!props.state.isFinished">
                                                                    <div class="w-full">
                                                                        <div class="flex flex-col items-center relative">
                                                                            <Autocomplete id="line.workcenter_id.id" placeHolder="'Choose Shift'" value="props.state.prepareVals.shift" data="props.state.shift ? props.state.shift : []" t-on-chosen="onOptionChosenShift" model="'mrp.workcenter'" field="'shift'"/>
                                                                        </div>
                                                                    </div>

                                                                </div>


                                                                <div class="form-row">
                                                                    <t t-if="line.state === 'ready' || line.state === 'pending'">
                                                                        <div>
                                                                            <!-- rounded-full -->
                                                                            <button class="btn-start 
                                                                                btn btn-accent
                                                                                py-2
                                                                                px-4
                                                                                hover:bg-accent-focus text-white 
                                                                                transition
                                                                                duration-150 ease-in" t-on-click="startWo">
                                                                                <i class="fa fa-play items-center"/>
                                                                                <span class="mx-1" t-esc="'START  ' + line.workcenter_id.name"/>
                                                                            </button>
                                                                        </div>
                                                                    </t>
                                                                    <t t-if="line.state === 'progress'">
                                                                        <div>
                                                                            <button class="btn-finish 
                                                                                btn btn-accent
                                                                                py-2
                                                                                px-4
                                                                                hover:bg-accent-focus text-white 
                                                                                transition
                                                                                duration-150 ease-in" t-on-click="finishWo">
                                                                                <i class="fa fa-stop items"/>
                                                                                <span class="mx-1" t-esc="'FINISH  ' + line.workcenter_id.name"/>
                                                                            </button>
                                                                        </div>
                                                                    </t>
                                                                </div>

                                                            </div>

                                                            <div class="flex flex-auto flex-col" t-if="line.state === 'progress'">
                                                                <div class="form-row  pt-3">
                                                                    <textarea rows="4" name="message" t-att-id="'o_message_'+line.workcenter_id.id" placeholder="Type your message" class="w-full resize-none rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"></textarea>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </t>
                        </ul>
                    </div>
                    <div class="row mt-3 o_tbl_sheet">
                        <div class="table-responsive">
                            <table class="table" id="tbl-wo">
                                <!-- <table class="table table-auto table-striped table-sm" id="tbl-wo"> -->
                                <thead>
                                    <tr>
                                        <th scope="col">No</th>
                                        <!-- <th scope="col">Manufacturing Order</th> -->
                                        <th scope="col">Work Center</th>
                                        <th scope="col">Machine</th>
                                        <th scope="col">Shift</th>
                                        <th scope="col">Operator</th>
                                        <th scope="col">Start</th>
                                        <th scope="col">Finished</th>
                                        <th scope="col">Duration</th>
                                        <th scope="col">Note</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </t>

</templates>
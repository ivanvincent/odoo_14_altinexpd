<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- List View -->
        <record model="ir.ui.view" id="stock_point_order_tree">
            <field name="name">stock.point.order.tree</field>
            <field name="model">stock.point.order</field>
            <field name="arch" type="xml">
                <tree default_order="name desc">
                    <field name="name"/>
                    <field name="date_order"/>
                    <field name="warehouse_id"/>
                    <field name="location_id"/>
                    <field name="jalur_id"/>
                    <field name="user_id"/>
                    <field name="amount_total" sum="Total"/>
                    <field name="state" widget="badge" decoration-info="state == 'confirm'" decoration-success="state == 'done'" />
                </tree>
            </field>
        </record>

        <!-- Form View -->
        <record model="ir.ui.view" id="stock_point_order_form">
            <field name="name">stock.point.order.form</field>
            <field name="model">stock.point.order</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button name="action_confirm" string="Confirm" states="draft" type="object" class="oe_highlight" />
                        <button name="action_done" string="Mark As Done" states="confirm" type="object" class="oe_highlight" />
                        <button name="action_draft" string="Set To Draft" states="confirm" type="object" />
                        <button name="action_cancel" string="Cancel" states="draft" type="object" />
                        <field name="state" widget="statusbar" statusbar_visible="draft,confirm,done"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" icon="fa-cubes">
                                <field name="amount_quantity" widget="statinfo" string="Total Quantity"/>
                            </button>
                        </div>
                        <div class="oe_title">
                            <h1>
                                <field name="name" readonly="1"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="company_id" invisible="1"/>
                                <field name="warehouse_id" options="{'no_open': True, 'no_create': True}"/>
                                <field name="location_id" options="{'no_open': True, 'no_create': True}"/>
                                <field name="jalur_id" domain="[('warehouse_id', '=', warehouse_id)]" options="{'no_open': True, 'no_create': True}"/>
                                <field name="salesperson_id"/>
                                <field name="lead_days"/>
                            </group>
                            <group>
                                <field name="date"/>
                                <field name="date_rutesale"/>
                                <field name="date_order"/>
                                <field name="user_id" options="{'no_open': True, 'no_create': True}"/>
                                <field name="pricelist_id" options="{'no_open': True, 'no_create': True}"/>
                                <field name="note"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Details">
                                <field name="line_ids" attrs="{'readonly': [('state', '=', 'confirm')]}">
                                    <tree editable="bottom">
                                        <field name="date_production"/>
                                        <field name="product_id" required="1" options="{'no_open': True, 'no_create': True}"/>
                                        <field name="lead_days"/>
                                        <field name="default_code"/>
                                        <field name="price_unit" invisible="1"/>
                                        <field name="price"/>
                                        <field name="quantity" required="1"/>
                                        <field name="product_uom_id"/>
                                        <field name="tax_id" widget="many2many_tags" invisible="1"/>
                                        <field name="price_subtotal"/>
                                    </tree>
                                </field>
                                <group name="note_group" col="6" class="mt-2 mt-md-0">
                                    <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                                        <field name="amount_untaxed" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                        <field name="amount_tax" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                        <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                            <label for="amount_total"/>
                                        </div>
                                        <field name="amount_total" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                    </group>
                                    <div class="oe_clear"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>


        <record id="stock_point_order_view_graph" model="ir.ui.view">
            <field name="name">stock.point.order.view.graph</field>
            <field name="model">stock.point.order</field>
            <field name="arch" type="xml">
                <graph string="Stock Point Order Analysis" sample="1" disable_linking="1">
                    <field name="warehouse_id" type="row"/>
                    <field name="amount_total" type="measure"/>
                </graph>
            </field>
        </record>

        <record id="stock_point_order_view_calender" model="ir.ui.view">
            <field name="name">stock_point_order.view.calender</field>
            <field name="model">stock.point.order</field>
            <field name="arch" type="xml">
                <calendar string="Calendar View" date_start="date_order" color="warehouse_id">
                    <field name="warehouse_id" filters="1"/>
                    <field name="state"/>
                </calendar>
            </field>
        </record>




        <record model="ir.ui.view" id="stock_point_order_line_tree">
            <field name="name">stock.point.order.line.tree</field>
            <field name="model">stock.point.order.line</field>
            <field name="arch" type="xml">
                <tree default_order="date_production desc" create="false" delete="false" edit="false">
                    <field name="order_id"/>
                    <field name="date_production"/>
                    <field name="product_id" required="1" options="{'no_open': True, 'no_create': True}"/>
                    <field name="default_code"/>
                    <field name="price_unit" invisible="1"/>
                    <field name="price"/>
                    <field name="quantity" required="1" sum="Total"/>
                    <field name="product_uom_id"/>
                    <field name="tax_id" widget="many2many_tags" invisible="1"/>
                    <field name="price_subtotal"/>
                    <field name="state" widget="badge" decoration-info="state == 'confirm'" decoration-success="state == 'done'" />
                </tree>
            </field>
        </record>




        <!-- Search View -->
        <record model="ir.ui.view" id="stock_point_order_view_search">
            <field name="name">stock.point.order.search</field>
            <field name="model">stock.point.order</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <field name="product_id"/>
                    <field name="user_id"/>
                    <field name="warehouse_id"/>
                    <field name="location_id"/>
                    <field name="jalur_id"/>
                    <group>
                        <filter name="warehouse_id" string="Warehouse" context="{'group_by':'warehouse_id'}"/>
                        <filter name="jalur_id" string="Jalur" context="{'group_by':'jalur_id'}"/>
                        <filter name="location_id" string="Location" context="{'group_by':'location_id'}"/>
                        <filter name="state" string="Status" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="stock_point_order_action">
            <field name="name">Stock Point Order</field>
            <field name="res_model">stock.point.order</field>
            <field name="view_mode">tree,graph,calendar,form</field>
            <field name="search_view_id" ref="stock_point_order_view_search" />
            <field name="context">{"search_default_user_id":uid}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                Click to start preparing a new prepaid revenue.
                </p>
                <p>
                This view can be used by accountants in order to collect information about prepaid revenues based on start date and end date. It then allows to generate the corresponding cutoff journal entry in one click.
                </p>
            </field>

        </record>

        <record id="stock_point_order_line_pivot_view" model="ir.ui.view">
            <field name="name">stock.point.order.line</field>
            <field name="model">stock.point.order.line</field>
            <field name="arch" type="xml">
                <pivot>
                    <field name="date_production" type="row"/>
                    <field name="warehouse_id" type="row"/>
                    <field name="product_id" type="row"/>
                    <field name="quantity" type="measure"/>
                </pivot>
            </field>
        </record>

           <record id="stock_point_order_line_view_graph" model="ir.ui.view">
            <field name="name">stock.point.order.line.view.graph</field>
            <field name="model">stock.point.order.line</field>
            <field name="arch" type="xml">
                <graph string="Stock Point Order Analysis" sample="1" disable_linking="1">
                    <field name="warehouse_id" type="row"/>
                    <field name="quantity" type="measure"/>
                </graph>
            </field>
        </record>

        <record id="stock_point_order_line_view_calender" model="ir.ui.view">
            <field name="name">stock_point_order.line.view.calender</field>
            <field name="model">stock.point.order.line</field>
            <field name="arch" type="xml">
                <calendar string="Calendar View" date_start="date_production" color="warehouse_id">
                    <field name="warehouse_id" filters="1"/>
                    <field name="state"/>
                </calendar>
            </field>
        </record>




        <menuitem id="main_stock_point_order" name="Stock Point Order" web_icon="stock_point_order,static/description/icon.png">
            <menuitem id="menu_stock_point_order" name="Stock Point Order" sequence="1">
                <menuitem id="submenu_stock_point_order" name="Stock Point Order" sequence="1" action="stock_point_order_action" />
            </menuitem>
            <menuitem id="submenu_stock_point_order_config" name="Configuration" sequence="2" />
        </menuitem>



    </data>
</odoo>
<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <data>
    
        <record id="sale_order_line_tree" model="ir.ui.view">
            <field name="name">sale_order_line.tree</field>
            <field name="model">sale.order.line</field>
            <field name="arch" type="xml">
                <tree string="" create="false">
                    <field name="order_id"/>
                    <field name="wo_date" string="Date"/>
                    <field name="product_id"/>
                    <field name="order_partner_id"/>
                    <field name="description"/>
                    <field name="product_uom_qty" sum="Total"/>
                    <field name="qty_delivered" string="Delivered Qty" sum="Total"/>
                    <field name="state" decoration-success="state == 'sale' or state == 'done'" decoration-info="state == 'draft' or state == 'sent'" widget="badge" optional="show"/>
                    <!-- <field name="qty_process"/> -->
                    <!-- <field name="qty_remaining"/> -->
                </tree>
            </field>
        </record>

        <record id="follow_up_marketing_tree" model="ir.ui.view">
            <field name="name">follow_up_marketing_tree</field>
            <field name="model">sale.order.line</field>
            <field name="arch" type="xml">
                <tree string="" create="false" decoration-primary="is_created_mo == True">
                    <field name="order_id" string="Sale Order"/>
                    <field name="wo_date" string="Date"/>
                    <field name="product_id"/>
                    <field name="order_partner_id"/>
                    <field name="employee_id"/>
                    <field name="greige_id"/>
                    <field name="on_hand_greige"/>
                    <field name="product_uom_qty" sum="Total"/>
                    <field name="qty_delivered" string="Delivered Qty" sum="Total"/>
                    <field name="state" decoration-success="state == 'sale' or state == 'done'" decoration-info="state == 'draft' or state == 'sent'" widget="badge" optional="show"/>
                    <field name="is_created_mo" invisible="1"/>
                    <!-- <button name="action_view_mo" type="object" string="" icon="fa-list" context="{'sale_id': order_id}"/> -->
                    <button name="%(inherit_sale_order.detail_mo_wizard_action)d" icon="fa-list" type="action" string="" context="{'sale_id': order_id}"/>
                    <!-- <field name="qty_process"/> -->
                    <!-- <field name="qty_remaining"/> -->
                </tree>
            </field>
        </record>

        <!-- Search View -->
        <record model="ir.ui.view" id="sale_order_line_search">
            <field name="name">sale.order.line.search</field>
            <field name="model">sale.order.line</field>
            <field name="arch" type="xml">
                <search>
                    <filter name="qty_bigger_zero" string="Qty Sisa &gt; 0" domain="[('qty_remaining','&gt;', 0)]"/>
                    <field name="is_created_mo"/>
                    <filter string="Planned" name="filter_planned" domain="[('is_created_mo', '=', True)]"/>
                    <filter string="Not Planned" name="filter_not_planned" domain="[('is_created_mo', '!=', True)]"/>
                </search>
            </field>
        </record>

        <record id="sale_order_line_action" model="ir.actions.act_window">
            <field name="name">Outstanding SO</field>
            <field name="res_model">sale.order.line</field>
            <field name="view_mode">tree</field>
            <field name="domain">[('order_id.sale_type', '!=', 'stock')]</field>
            <field name="context">{'search_default_qty_bigger_zero':1}</field>
            <field name="view_id" ref="sale_order_line_tree"/>
        </record>

        <record id="follow_up_marketing_action" model="ir.actions.act_window">
            <field name="name">Follow Up Marketing</field>
            <field name="res_model">sale.order.line</field>
            <field name="view_mode">tree</field>
            <field name="context"></field>
            <field name="view_id" ref="follow_up_marketing_tree"/>
        </record>

        <menuitem
            id="outstanding_so_menu"
            name="Outstanding SO"
            action="sale_order_line_action"
            parent="sale.sale_order_menu"
            sequence="2"/>

        <menuitem
            id="follow_up_marketing_menu"
            name="Follow Up Marketing"
            action="follow_up_marketing_action"
            parent="sale.sale_order_menu"
            sequence="3"/>
    
    </data>
    

</odoo>

<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <data>

        <record id="group_restrict_product_variant" model="res.groups">
            <field name="name">Restrict Product Variant</field>
        </record>

        <record model="ir.rule" id="product_product_record_rule">
            <field name="name">Product Variant Record Rule</field>
            <field name="model_id" ref="stock.model_product_product"/>
            <field name="domain_force">[('categ_id', 'in', [category.id  for warehouse in user.default_warehouse_ids for category in warehouse.product_category_ids])]</field>
            <field name="groups" eval="[(4, ref('inherit_inventory.group_restrict_product_variant'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <record model="ir.rule" id="product_template_record_rule">
            <field name="name">Product Template Record Rule</field>
            <field name="model_id" ref="stock.model_product_template"/>
            <field name="domain_force">[('categ_id', 'in', [category.id  for warehouse in user.default_warehouse_ids for category in warehouse.product_category_ids])]</field>
            <field name="groups" eval="[(4, ref('inherit_inventory.group_restrict_product_variant'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>


        <record id="group_restrict_inventory_adjustment" model="res.groups">
            <field name="name">Restrict Inventory Adjustment</field>
        </record>

        <record model="ir.rule" id="stock_inventory_record_rule">
            <field name="name">Stock Inventory Rule</field>
            <field name="model_id" ref="stock.model_stock_inventory"/>
            <field name="domain_force">[('location_ids', 'in', [location.id  for location in user.stock_location_dest_ids])]</field>
            <field name="groups" eval="[(4, ref('inherit_inventory.group_restrict_inventory_adjustment'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

    </data>


</odoo>
